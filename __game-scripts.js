var Network=pc.createScript("network"),otherimage=null,chan=!1;console.log(this.chan),Network.prototype.initialize=function(){this.socket=io.connect("https://abaft-jumbled-dibble.glitch.me/"),this.socket.emit("initialize");var t=this.socket;this.player=this.app.root.findByName("Player"),this.other=this.app.root.findByName("Other");var e=this;t.on("playerData",(function(t){e.initializePlayers(t)})),t.on("playerJoined",(function(t){e.addPlayer(t)})),t.on("playerMoved",(function(t){e.movePlayer(t)})),t.on("otherImg",(function(t){e.successRef(t)})),t.on("imgFlag",(function(){e.thischan()})),t.on("killPlayer",(function(t){e.deletePlayer(t)}))},Network.prototype.update=function(t){this.updatePosition()},Network.prototype.imagechange=function(t){const e=t.img,i=this.players[t.id].entity,r=new Image;r.crossOrigin="anonymous";new Promise((t=>{r.onload=()=>{const e=new pc.TextureAtlas;e.frames={0:{rect:new pc.Vec4(0,0,64,64),pivot:new pc.Vec2(.5,.5),border:new pc.Vec4(0,0,0,0)}};const i=new pc.Texture(this.app.graphicsDevice,{magFilter:pc.FILTER_NEAREST,minFilter:pc.FILTER_NEAREST});i.setSource(r),e.texture=i;const o=new pc.Sprite(this.app.graphicsDevice,{atlas:e,frameKeys:"0",pixelsPerUnit:50,renderMode:pc.SPRITE_RENDERMODE_SIMPLE});return t(o)},r.src=e})).then((t=>{i.sprite.sprite=t}))},Network.prototype.initializePlayers=function(t){for(var e in this.players=t.players,this.id=t.id,this.players)e!=Network.id&&(this.players[e].entity=this.createPlayerEntity(this.players[e]),t.img&&this.imagechange(t));this.initialized=!0},Network.prototype.createPlayerEntity=function(t){var e=this.other.clone();return e.enabled=!0,this.other.getParent().addChild(e),t&&e.rigidbody.teleport(t.x,t.y,t.z),e},Network.prototype.addPlayer=function(t){this.players[t.id]=t,this.players[t.id].entity=this.createPlayerEntity(t)},Network.prototype.thischan=function(){this.chan=!1},Network.prototype.otherchange=function(){this.chan=!0},Network.prototype.movePlayer=function(t){this.initialized&&this.players[t.id].entity.rigidbody.teleport(t.x,t.y,t.z),t.dir<0?this.players[t.id].entity.sprite.flipX=!1:this.players[t.id].entity.sprite.flipX=!0,!0===t.imflag&&this.imagechange(t)},Network.prototype.updatePosition=function(){if(this.initialized){var t=this.player.getPosition();!1===this.player.sprite.flipX?this.dir=-1:this.dir=1,this.socket.emit("positionUpdate",{id:this.id,x:t.x,y:t.y,z:t.z,dir:this.dir,img:this.otherimage,imflag:this.chan})}},Network.prototype.deletePlayer=function(t){this.players[t].entity&&(this.players[t].entity.destroy(),this.players[t].deleted=!0)};var CreateSpriteAtRuntime=pc.createScript("createSpriteAtRuntime");CreateSpriteAtRuntime.attributes.add("playerimage",{type:"string",title:"Player image"}),CreateSpriteAtRuntime.attributes.add("change",{type:"boolean",default:!1,title:"change"}),CreateSpriteAtRuntime.prototype.initialize=function(){},CreateSpriteAtRuntime.prototype.update=function(e){},CreateSpriteAtRuntime.prototype.successRef=function(){const e=this.playerimage,t=this.entity.findByName("Player"),i=new Image;i.crossOrigin="anonymous";new Promise((t=>{i.onload=()=>{const e=new pc.TextureAtlas;e.frames={0:{rect:new pc.Vec4(0,0,64,64),pivot:new pc.Vec2(.5,.5),border:new pc.Vec4(0,0,0,0)}};const r=new pc.Texture(this.app.graphicsDevice,{magFilter:pc.FILTER_NEAREST,minFilter:pc.FILTER_NEAREST});r.setSource(i),e.texture=r;const n=new pc.Sprite(this.app.graphicsDevice,{atlas:e,frameKeys:"0",pixelsPerUnit:50,renderMode:pc.SPRITE_RENDERMODE_SIMPLE});return t(n)},i.src=e})).then((e=>{t.sprite.sprite=e}))};var Movement=pc.createScript("movement");Movement.attributes.add("playerSpeed",{type:"number",default:30,title:"Player Speed"}),Movement.prototype.initialize=function(){this.force=new pc.Vec3,this.entity.collision.on("contact",this._colstart,this),this.entity.collision.on("collisionend",this._colend,this)},Movement.prototype.update=function(t){var e=this.entity.forward,i=this.entity.right,o=this.app;x=0,z=0,o.keyboard.isPressed(pc.KEY_A)&&(x-=i.x,z-=i.z,this.movefor=1),o.keyboard.isPressed(pc.KEY_D)&&(x+=i.x,z+=i.z,this.movefor=-1),o.keyboard.isPressed(pc.KEY_W)&&(x+=e.x,z+=e.z),o.keyboard.isPressed(pc.KEY_S)&&(x-=e.x,z-=e.z),0===x&&0===z||(x*=t,z*=t,this.force.set(x,0,z).normalize().scale(this.playerSpeed),this.entity.rigidbody.applyForce(this.force)),this.setDirection(this.movefor)},Movement.prototype.setDirection=function(t){this.entity.sprite.flipX=t<0},Movement.prototype._colstart=function(t){t.other.tags.has("kabe")&&this.app.hasEvent("colliEvent")&&this.app.fire("colliEvent")},Movement.prototype._colend=function(t){this.app.hasEvent("colliEnd")&&this.app.fire("colliEnd")};var CameMove=pc.createScript("cameMove");CameMove.attributes.add("playerSpeed",{type:"number",default:30,title:"Camera Speed"}),CameMove.attributes.add("stop",{type:"boolean",default:!1,title:"stop"}),CameMove.prototype.initialize=function(){this.force=new pc.Vec3,this.app.on("colliEvent",this.colli,this),this.app.on("colliEnd",this.collen,this),this.on("destroy",(function(){this.app.off("colliEvent",this.colli,this)})),this.on("destroy",(function(){this.app.off("colliEnd",this.collen,this)}))},CameMove.prototype.update=function(t){this.entity.forward;var e=this.entity.right,o=this.app;x=0,z=0,o.keyboard.isPressed(pc.KEY_A)&&!this.stop&&(x-=e.x,z-=e.z),o.keyboard.isPressed(pc.KEY_D)&&!this.stop&&(x+=e.x,z+=e.z),(0!==x||0!==z&&!this.stop)&&(x*=t,z*=t,this.force.set(x,0,z).normalize().scale(this.playerSpeed),this.entity.rigidbody.applyForce(this.force))},CameMove.prototype.colli=function(){this.stop=!0},CameMove.prototype.collen=function(){console.log("out"),this.stop=!1};var Screenshot=pc.createScript("screenshot");Screenshot.attributes.add("cameraEntity",{type:"entity",description:"The camera entity to use for taking the screenshot with. Whatever, this camera renders will be in the screen capture."}),Screenshot.prototype.initialize=function(){this.createNewRenderTexture(),this.app.graphicsDevice.on("resizecanvas",(function(e,t){this.secsSinceSameSize=0}),this);this.app.graphicsDevice;this.lastWidth=640,this.lastHeight=360,this.secsSinceSameSize=0,this.triggerScreenshot=!1,this.cameraEntity.camera.priority=-1,this.on("destroy",(function(){this.app.off("ui:takeScreenshot",onTakeScreenshot,this),this.app.off("postrender",this.postRender,this),window.document.body.removeChild(linkElement),this.renderTarget&&(this.renderTarget.destroy(),this.renderTarget=null),this.colorTexture&&(this.colorTexture.destroy(),this.colorTexture=null),this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null)}),this)},Screenshot.prototype.update=function(e){this.app.graphicsDevice;this.lastWidth=640,this.lastHeight=360},Screenshot.prototype.createNewRenderTexture=function(){var e=this.app.graphicsDevice;if(this.colorTexture&&this.depthTexture&&this.renderTarget){var t=this.renderTarget,r=this.colorTexture,i=this.depthTexture;this.renderTarget=null,this.colorTexture=null,this.depthTexture=null,t.destroy(),r.destroy(),i.destroy()}var s=new pc.Texture(e,{width:640,height:360,format:pc.PIXELFORMAT_R8_G8_B8_A8,autoMipmap:!0}),h=new pc.Texture(e,{format:pc.PIXELFORMAT_DEPTHSTENCIL,width:640,height:360,mipmaps:!1,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE});s.minFilter=pc.FILTER_NEAREST,s.magFilter=pc.FILTER_NEAREST;var a=new pc.RenderTarget({colorBuffer:s,depthBuffer:h,samples:4,flipY:!0});this.cameraEntity.camera.renderTarget=a,this.unScaledTextureWidth=640,this.unScaledTextureHeight=360,this.colorTexture=s,this.depthTexture=h,this.renderTarget=a,this.app.root.findByName("Render Image").element.texture=this.colorTexture};var Chara0=pc.createScript("chara0");Chara0.attributes.add("purl",{type:"string",default:"https://raw.githubusercontent.com/Shashop/LLtest/main/deric.png",title:"purl"}),Chara0.attributes.add("logEntity",{type:"entity",title:"Log Entity"}),Chara0.prototype.initialize=function(){this.entity.button.on("click",(function(t){var i=this.logEntity.findComponent("script");i.createSpriteAtRuntime.playerimage=this.purl,i.createSpriteAtRuntime.successRef(),i.network.otherimage=this.purl,i.network.otherchange()}),this),this.entity.button.on("click",(function(t){this.app.hasEvent("imachange")&&this.app.fire("imachange")}),this)},Chara0.prototype.update=function(t){};var Chara1=pc.createScript("chara1");Chara1.attributes.add("purl",{type:"string",default:"https://raw.githubusercontent.com/Shashop/LLtest/main/thad.png",title:"purl"}),Chara1.attributes.add("logEntity",{type:"entity",title:"Log Entity"}),Chara1.prototype.initialize=function(){this.entity.button.on("click",(function(t){var i=this.logEntity.findComponent("script");i.createSpriteAtRuntime.playerimage=this.purl,i.createSpriteAtRuntime.successRef(),i.network.otherimage=this.purl,i.network.otherchange()}),this),this.entity.button.on("click",(function(t){this.app.hasEvent("imachange")&&this.app.fire("imachange")}),this)},Chara1.prototype.update=function(t){};var Chara2=pc.createScript("chara2");Chara2.attributes.add("purl",{type:"string",default:"https://raw.githubusercontent.com/Shashop/LLtest/main/theo.png",title:"purl"}),Chara2.attributes.add("logEntity",{type:"entity",title:"Log Entity"}),Chara2.prototype.initialize=function(){this.entity.button.on("click",(function(t){var i=this.logEntity.findComponent("script");i.createSpriteAtRuntime.playerimage=this.purl,i.createSpriteAtRuntime.successRef(),i.network.otherimage=this.purl,i.network.otherchange()}),this),this.entity.button.on("click",(function(t){this.app.hasEvent("imachange")&&this.app.fire("imachange")}),this)},Chara2.prototype.update=function(t){};const Ui=pc.createScript("ui");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),Ui.prototype.initialize=function(){const e=document.getElementsByTagName("body")[0],t=document.getElementsByTagName("head")[0],s=`<style>${this.css.resource}</style>`;e.insertAdjacentHTML("beforeend",this.html.resource),t.insertAdjacentHTML("beforeend",s)},Ui.prototype.updateStyle=function(){if(this.entity.element.screenCorners){var e=this.entity.element.screenCorners,t=this.app.graphicsDevice.maxPixelRatio;this.element.style.left=e[0].x/t+"px",this.element.style.bottom=e[0].y/t+"px",this.element.style.width=(e[2].x-e[0].x)/t+"px",this.element.style.height=(e[2].y-e[0].y)/t+"px"}},Ui.prototype.update=function(e){this.updateStyle()};class Modal extends pc.ScriptType{initialize(){this.hideElement={onclick:()=>{this.hide()}},this.entity.element.on(pc.EVENT_MOUSEDOWN,this.show,this),this.entity.element.on(pc.EVENT_TOUCHSTART,this.show,this)}show(){const e=m("div",{class:"fixed z-10 inset-0 overflow-y-auto"},m("div",{class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[m("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},m("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})),m("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},m.trust("&#8203;")),m("div",{class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},[m("div",{class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},m("div",{class:"sm:flex sm:items-start"},[m("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},m("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))),m("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[m("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"}," Deactivate account "),m("div",{class:"mt-2"},m("p",{class:"text-sm text-gray-500"}," Are you sure you want to deactivate your account? All of your data will be permanently removed. This action cannot be undone. "))])])),m("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[m("button",{class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",type:"button",...this.hideElement}," Deactivate "),m("button",{class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",type:"button",...this.hideElement}," Cancel ")])])]));this.app.fire("render",e)}hide(){this.app.fire("clear")}}pc.registerScript(Modal);class Chatform extends pc.ScriptType{initialize(){this.hideElement={onclick:()=>{this.hide()}},this.show()}show(){const e=m("div",[m("div",{class:"relative w-1920 h-1080 rounded-md bg-sky-500 opacity-25"},[m("input",{class:"absolute top:100px w-96 h-20 rounded-md border-gray-300 pl-7 pr-12 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",type:"text",name:"price",id:"price",placeholder:"0.00"})])]);this.app.fire("render",e)}hide(){this.app.fire("clear")}}pc.registerScript(Chatform);var Input=pc.createScript("input");Input.attributes.add("placeholder",{type:"string"}),Input.attributes.add("type",{type:"string",enum:[{Text:"text"},{Email:"email"},{Password:"password"}],default:"text"}),Input.attributes.add("fontSize",{type:"number",default:1}),Input.attributes.add("padding",{type:"number",default:1}),Input.attributes.add("scaleUnit",{type:"string",enum:[{"Viewport Width":"vw"},{"Viewport Height":"vh"},{Pixel:"px"}],default:"vw"}),Input.attributes.add("color",{type:"rgb"}),Input.attributes.add("fontFamily",{type:"string",default:"Arial, sans-serif"}),Input.attributes.add("storeValue",{type:"boolean"}),Input.attributes.add("focusEntity",{type:"entity"}),Input.prototype.initialize=function(){this.element=document.createElement("input"),this.element.placeholder=this.placeholder,this.element.type=this.type,this.element.style.position="absolute",this.element.style.fontFamily=this.fontFamily,this.element.style.border="0px",this.element.style.borderRadius="30px",this.element.style.background="rgb("+167*this.color.r+", "+167*this.color.g+", "+167*this.color.b+")",this.element.style.fontSize=this.fontSize+this.scaleUnit,this.element.style.padding=this.padding+this.scaleUnit,this.element.style.paddingLeft=60+this.scaleUnit,this.element.style.boxSizing="border-box";var t="rgb("+0*this.color.r+", "+0*this.color.g+", "+0*this.color.b+")";(this.element.style.color=t,this.element.style.outline="none",document.body.appendChild(this.element),this.focusEntity&&(this.focusEntity.enabled=!1,this.element.onfocus=this.onFocus.bind(this),this.element.onblur=this.onBlur.bind(this)),this.element.onchange=this.onChange.bind(this),this.storeValue)&&(window.localStorage.getItem(this.entity._guid)&&this.setValue(window.localStorage.getItem(this.entity._guid)));this.updateStyle(),this.on("state",(function(t){this.entity.enabled?this.element.style.display="block":this.element.style.display="none"}),this)},Input.prototype.onFocus=function(){this.focusEntity.enabled=!0},Input.prototype.onBlur=function(){this.focusEntity.enabled=!1},Input.prototype.onChange=function(){this.storeValue&&window.localStorage.setItem(this.entity._guid,this.getValue())},Input.prototype.updateStyle=function(){if(this.entity.element.screenCorners){var t=this.entity.element.screenCorners,e=this.app.graphicsDevice.maxPixelRatio;this.element.style.left=t[0].x/e+"px",this.element.style.bottom=t[0].y/e+"px",this.element.style.width=(t[2].x-t[0].x)/e+"px",this.element.style.height=(t[2].y-t[0].y)/e+"px"}},Input.prototype.update=function(t){this.updateStyle()},Input.prototype.setValue=function(t){this.element.value=t},Input.prototype.getValue=function(){if(this.element)return this.element.value};var LogSpace=pc.createScript("logSpace");LogSpace.attributes.add("fontSize",{type:"number",default:1}),LogSpace.attributes.add("padding",{type:"number",default:1}),LogSpace.attributes.add("scaleUnit",{type:"string",enum:[{"Viewport Width":"vw"},{"Viewport Height":"vh"},{Pixel:"px"}],default:"vw"}),LogSpace.attributes.add("color",{type:"rgb"}),LogSpace.attributes.add("fontFamily",{type:"string",default:"Arial, sans-serif"}),LogSpace.attributes.add("storeValue",{type:"boolean"}),LogSpace.attributes.add("focusEntity",{type:"entity"}),LogSpace.prototype.initialize=function(){this.element=document.createElement("div");var t=document.createTextNode("Hi there and greetings!");this.element.appendChild(t),this.element.style.position="absolute",this.element.style.fontFamily=this.fontFamily,this.element.style.border="0px",this.element.style.background="rgb("+167*this.color.r+", "+167*this.color.g+", "+167*this.color.b+")",this.element.style.fontSize=this.fontSize+this.scaleUnit,this.element.style.padding=this.padding+this.scaleUnit,this.element.style.boxSizing="border-box";var e="rgb("+0*this.color.r+", "+0*this.color.g+", "+0*this.color.b+")";(this.element.style.color=e,this.element.style.outline="none",document.body.appendChild(this.element),this.focusEntity&&(this.focusEntity.enabled=!1,this.element.onfocus=this.onFocus.bind(this),this.element.onblur=this.onBlur.bind(this)),this.element.onchange=this.onChange.bind(this),this.storeValue)&&(window.localStorage.getItem(this.entity._guid)&&this.setValue(window.localStorage.getItem(this.entity._guid)));this.updateStyle(),this.on("state",(function(t){this.entity.enabled?this.element.style.display="block":this.element.style.display="none"}),this)},LogSpace.prototype.onFocus=function(){this.focusEntity.enabled=!0},LogSpace.prototype.onBlur=function(){this.focusEntity.enabled=!1},LogSpace.prototype.onChange=function(){this.storeValue&&window.localStorage.setItem(this.entity._guid,this.getValue())},LogSpace.prototype.updateStyle=function(){if(this.entity.element.screenCorners){var t=this.entity.element.screenCorners,e=this.app.graphicsDevice.maxPixelRatio;this.element.style.left=t[0].x/e+"px",this.element.style.bottom=t[0].y/e+"px",this.element.style.width=(t[2].x-t[0].x)/e+"px",this.element.style.height=(t[2].y-t[0].y)/e+"px"}},LogSpace.prototype.update=function(t){this.updateStyle()},LogSpace.prototype.setValue=function(t){this.element.value=t},LogSpace.prototype.getValue=function(){if(this.element)return this.element.value};var ChatUtility=pc.createScript("chatUtility");ChatUtility.attributes.add("fontSize",{type:"number",default:1}),ChatUtility.attributes.add("padding",{type:"number",default:1}),ChatUtility.attributes.add("scaleUnit",{type:"string",enum:[{"Viewport Width":"vw"},{"Viewport Height":"vh"},{Pixel:"px"}],default:"vw"}),ChatUtility.attributes.add("color",{type:"rgb"}),ChatUtility.attributes.add("fontFamily",{type:"string",default:"Arial, sans-serif"}),ChatUtility.attributes.add("storeValue",{type:"boolean"}),ChatUtility.attributes.add("focusEntity",{type:"entity"}),ChatUtility.prototype.initialize=function(){this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.fontFamily=this.fontFamily,this.element.style.border="0px",this.element.style.borderRadius="5px",this.element.style.background="rgb("+167*this.color.r+", "+167*this.color.g+", "+167*this.color.b+")",this.element.style.fontSize=this.fontSize+this.scaleUnit,this.element.style.padding=this.padding+this.scaleUnit,this.element.style.paddingLeft=60+this.scaleUnit,this.element.style.boxSizing="border-box";var t="rgb("+0*this.color.r+", "+0*this.color.g+", "+0*this.color.b+")";(this.element.style.color=t,this.element.style.outline="none",document.body.appendChild(this.element),this.focusEntity&&(this.focusEntity.enabled=!1,this.element.onfocus=this.onFocus.bind(this),this.element.onblur=this.onBlur.bind(this)),this.element.onchange=this.onChange.bind(this),this.storeValue)&&(window.localStorage.getItem(this.entity._guid)&&this.setValue(window.localStorage.getItem(this.entity._guid)));this.updateStyle(),this.on("state",(function(t){this.entity.enabled?this.element.style.display="block":this.element.style.display="none"}),this)},ChatUtility.prototype.onFocus=function(){this.focusEntity.enabled=!0},ChatUtility.prototype.onBlur=function(){this.focusEntity.enabled=!1},ChatUtility.prototype.onChange=function(){this.storeValue&&window.localStorage.setItem(this.entity._guid,this.getValue())},ChatUtility.prototype.updateStyle=function(){if(this.entity.element.screenCorners){var t=this.entity.element.screenCorners,e=this.app.graphicsDevice.maxPixelRatio;this.element.style.left=t[0].x/e+"px",this.element.style.bottom=t[0].y/e+"px",this.element.style.width=(t[2].x-t[0].x)/e+"px",this.element.style.height=(t[2].y-t[0].y)/e+"px"}},ChatUtility.prototype.update=function(t){this.updateStyle()},ChatUtility.prototype.setValue=function(t){this.element.value=t},ChatUtility.prototype.getValue=function(){if(this.element)return this.element.value};

//# sourceMappingURL=__game-scripts.js.map